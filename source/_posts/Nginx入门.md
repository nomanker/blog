---
title: Nginx入门
date: 2021-05-07 12:25:08
categories:
  - 学习之路
tags: 
- 后端
---

### Nginx

#### 什么是Nginx?

Nginx是一个高性能的HTTP和反向代理web服务器，同时也提供了IMAP/POP3/SMTP服务。其特点是占有内存少，并发能力强，其并发能力在同类型的网页服务器中表现较好。

Nginx是一个安装非常简单、配置文件非常简洁（同时能够支持Perl语法），bug非常少。几乎可以做到7*24不间断运行，及时运行数月也不需要重新启动，能够在不间断服务的情况下进行软件版本的升级。

Nginx代码完全用c语言写成（c真强），能够支持高达50000个并发连接数的响应。

#### Nginx作用

**正向代理（forward proxy）**：是一个位于客户端和目标服务器之间的服务器(代理服务器)，为了从目标服务器取得内容，客户端向代理服务器发送一个请求并指定目标，然后代理服务器向目标服务器转交请求并将获得的内容返回给客户端。

**反向代理（reverse proxy）**：是指以代理服务器来接受internet上的连接请求，然后将请求转发给内部网络上的服务器，并将从服务器上得到的结果返回给internet上请求连接的客户端，此时代理服务器对外就表现为一个反向代理服务器。

具体可以参考：https://cloud.tencent.com/developer/article/1418457 讲的很清楚

**负载均衡**：根据所有真实服务器的负载情况，将客户端请求分发到不同的真实服务器上。(目前没有使用复杂均衡的刚需，面向百度编程，狂神也行🙄)

Nginx提供的负载均衡策略有2种：内置策略和扩展策略。内置策略为轮询，加权轮询，ip hash。扩展策略就像天马行空，只有你想不到没有他做不到的。

* ip hash : 对客户端请求的ip进行hash操作，然后根据hash 结果将同一个客户端ip的请求分发给同一台服务器进行处理，可以解决session不共享的问题。

**动静分离** ：在我们的软件开发中有些请求是需要后台处理的，有些请求是不需要经过后台处理的（如css、html、js等文件），这些不需要经过后台处理的文件成为静态文件。让动态网站里的动态网页根据一定规则把不变的资源和经常变的资源区分开来，动静资源做好拆分后，我们就可以根据静态资源的特点将其做缓存操作。提高资源响应的速度。

#### Nginx常用命令

~~~c
cd /usr/local/nginx/sbin/
./nginx 启动
./nginx -s stop 停止
./nginx -s quit 安全退出
./nginx -s reload 重新加载配置文件
ps aux/grep nginx 查看nginx进程
~~~

等回来有钱了再考虑负载均衡🤐